<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yahoo Mail API Testing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <style>
        /* Custom styles to ensure consistency across browsers */
        input, select, button {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border: 1px solid #e2e8f0;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-6">
        <h1 class="text-2xl font-bold mb-6">Yahoo Mail API Testing Interface</h1>
        
        <div class="mb-4">
            <label for="wssid" class="block text-sm font-medium text-gray-700">WSSID:</label>
            <input type="text" id="wssid" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
        </div>
        
        <div class="mb-4">
            <label for="mailboxId" class="block text-sm font-medium text-gray-700">MailboxId:</label>
            <input type="text" id="mailboxId" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
        </div>
        
        <div class="mb-4">
            <label for="apiSelect" class="block text-sm font-medium text-gray-700">API:</label>
            <select id="apiSelect" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                <option value="">--- Select an API ---</option>
                <option value="listMessages">List Messages</option>
                <option value="listFolders">List Folders</option>
                <option value="listAccount">List Account</option>
                <option value="listMailboxAttributes">List Mailbox Attributes</option>
                <option value="listAlerts">List Alerts</option>
                <option value="listSavedSearches">List SavedSearches</option>
                <option value="listDecos">List Decos</option>
                <option value="getMessageMetadata">Get Message Metadata</option>
                <option value="getMessageRaw">Get Message Raw</option>
                <option value="getMessageSimpleBody">Get Message SimpleBody</option>
                <option value="getMessageSimpleBodySecure">Get Message SimpleBody Secure</option>
                <option value="getMessageSimpleBodyFull">Get Message SimpleBody Full</option>
                <option value="getMessageSimpleBodyFullSecure">Get Message SimpleBody Full Secure</option>
                <option value="createFolder">Create Folder</option>
                <option value="saveMessage">Save Message</option>
            </select>
        </div>
        
        <div id="additionalFields" class="mb-4"></div>
        
        <button id="submitButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Submit Request
        </button>
        
        <div id="responseArea" class="mt-6 p-4 bg-gray-200 rounded-lg hidden">
            <h2 class="text-lg font-semibold mb-2">Response:</h2>
            <pre id="responseContent" class="whitespace-pre-wrap overflow-x-auto"></pre>
        </div>
    </div>

    <script>
        const apiSelect = document.getElementById('apiSelect');
        const additionalFields = document.getElementById('additionalFields');
        const submitButton = document.getElementById('submitButton');
        const responseArea = document.getElementById('responseArea');
        const responseContent = document.getElementById('responseContent');

        apiSelect.addEventListener('change', updateAdditionalFields);
        submitButton.addEventListener('click', submitRequest);

        function updateAdditionalFields() {
            additionalFields.innerHTML = '';
            const selectedApi = apiSelect.value;

            if (['listMessages', 'listFolders', 'listAccount', 'listMailboxAttributes', 'listAlerts', 'listSavedSearches', 'listDecos'].includes(selectedApi)) {
                addField('query', 'Query');
            }

            if (['getMessageMetadata', 'getMessageRaw', 'getMessageSimpleBody', 'getMessageSimpleBodySecure', 'getMessageSimpleBodyFull', 'getMessageSimpleBodyFullSecure'].includes(selectedApi)) {
                addField('messageId', 'Message ID');
            }

            if (selectedApi === 'listMailboxAttributes') {
                addDropdown('mailboxAttribute', 'Mailbox Attribute', [
                    'web.mailTabs', 'web.mailPreviewPane', 'web.hasStationery', 'web.composeFontFamily',
                    'web.composeFontSize', 'web.sortOrder', 'web.useRichText', 'web.msgPaneVisible',
                    'web.msgsListDensity', 'web.desktopNotification', 'web.generalSnippet', 'web.enableTweet',
                    'web.enableEnhancerLinkPreview', 'web.ymv', 'web.mailTheme', 'web.ccOnSend',
                    'web.hideAd', 'web.newsCategory', 'web.composeShowCc', 'web.composeShowBcc',
                    'web.suppressEmptyFolderVideo', 'web.searchSortBy', 'web.stationeryTheme',
                    'mailOnBoard', 'web.openedTabs', 'web.expandedFolders', 'web.blockImages',
                    'hasAds', 'web.showCustomFolders', 'web.actionAfterMsgMove', 'web.addUnknownContact',
                    'web.showSmartViews', 'web.themeMode', 'web.keyTasksPanel', 'web.breakingNews',
                    'web.peopleNotification', 'web.importantNotification', 'web.cancelClickOnHoverDeleteCount',
                    'web.confirmBeforeDelete', 'web.showEmailHistory', 'web.markAsReadInterval',
                    'web.showCloudFilePermissionsDialog', 'web.autoSuggestHideFacebookFooter',
                    'web.autoSuggestHideLinkedinFooter', 'web.hideLinkedinReconnect',
                    'web.lastCalloutTimestamp', 'web.nextCalloutTimestamp', 'web.bccOnSend',
                    'popArchiveEnable', 'attachTotalSize', 'enableArchive', 'maxDeaAccounts',
                    'maxFilters', 'maxFolders', 'maxImapInAccounts', 'maxPopInAccounts',
                    'maxSendAsAccounts', 'attachFileSize', 'blockedAddressesMax', 'maxMigrationAccounts',
                    'web.showUnsubscribeNotification', 'web.numUnsubscribedItems', 'web.unsubscribeTimestamp',
                    'mobile.premiumExpiryDate', 'activity', 'cardConvesationId'
                ]);
            }

            if (selectedApi === 'createFolder') {
                addField('folderName', 'Folder Name');
            }

            if (selectedApi === 'saveMessage') {
                addField('subject', 'Subject');
                addField('body', 'Body');
                addField('to', 'To');
            }
        }

        function addField(id, label) {
            const field = document.createElement('div');
            field.className = 'mb-4';
            field.innerHTML = `
                <label for="${id}" class="block text-sm font-medium text-gray-700">${label}:</label>
                <input type="text" id="${id}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            `;
            additionalFields.appendChild(field);
        }

        function addDropdown(id, label, options) {
            const field = document.createElement('div');
            field.className = 'mb-4';
            field.innerHTML = `
                <label for="${id}" class="block text-sm font-medium text-gray-700">${label}:</label>
                <select id="${id}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                    ${options.map(option => `<option value="${option}">${option}</option>`).join('')}
                </select>
            `;
            additionalFields.appendChild(field);
        }

        async function submitRequest() {
            const wssid = document.getElementById('wssid').value;
            const mailboxId = document.getElementById('mailboxId').value;
            const selectedApi = apiSelect.value;

            let endpoint = `https://apis.yahoo.com/ws/v3/mailboxes/${mailboxId}`;
            let method = 'GET';
            let data = {};

            switch (selectedApi) {
                case 'listMessages':
                    endpoint += '/messages';
                    data.query = document.getElementById('query').value;
                    break;
                case 'listFolders':
                    endpoint += '/folders';
                    break;
                case 'listAccount':
                    endpoint = `https://apis.yahoo.com/ws/v3/account`;
                    break;
                case 'listMailboxAttributes':
                    endpoint += '/preferences';
                    data.attr = document.getElementById('mailboxAttribute').value;
                    break;
                case 'listAlerts':
                    endpoint += '/alerts';
                    break;
                case 'listSavedSearches':
                    endpoint += '/searches';
                    break;
                case 'listDecos':
                    endpoint += '/decos';
                    break;
                case 'getMessageMetadata':
                case 'getMessageRaw':
                case 'getMessageSimpleBody':
                case 'getMessageSimpleBodySecure':
                case 'getMessageSimpleBodyFull':
                case 'getMessageSimpleBodyFullSecure':
                    const messageId = document.getElementById('messageId').value;
                    endpoint += `/messages/${messageId}`;
                    if (selectedApi !== 'getMessageMetadata') {
                        endpoint += `/${selectedApi.replace('getMessage', '').toLowerCase()}`;
                    }
                    break;
                case 'createFolder':
                    method = 'POST';
                    endpoint += '/folders';
                    data.name = document.getElementById('folderName').value;
                    break;
                case 'saveMessage':
                    method = 'POST';
                    endpoint += '/messages';
                    data.subject = document.getElementById('subject').value;
                    data.body = document.getElementById('body').value;
                    data.to = document.getElementById('to').value;
                    break;
            }

            try {
                const response = await axios({
                    method: method,
                    url: endpoint,
                    data: method === 'POST' ? data : null,
                    params: method === 'GET' ? data : null,
                    headers: {
                        'Authorization': `Bearer ${wssid}`,
                        'Content-Type': 'application/json'
                    }
                });

                responseContent.textContent = JSON.stringify(response.data, null, 2);
                responseArea.classList.remove('hidden');
            } catch (error) {
                responseContent.textContent = `Error: ${error.message}\n\n${JSON.stringify(error.response?.data, null, 2)}`;
                responseArea.classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
